<div class="font-inter">
  <h2 class="text-4xl font-bold mb-2">Manage Categories</h2>
  <div class="p-4 rounded-lg shadow-lg">

    <!-- Add Category Button -->
    <div class="flex justify-end mb-4">
      <button
        class="cursor-pointer px-16 py-3 text-sm font-bold text-gray-800 rounded-full shadow-sm bg-[#cef3ef] hover:bg-[#97e9e2] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#68d9d0] transition-colors duration-300"
        (click)="openAddDialog()">
        ADD CATEGORY
      </button>
    </div>

    <!-- Error -->
    <p *ngIf="error" class="text-red-500">{{ error }}</p>

    <!-- Authors Table -->
    <table class="min-w-full rounded-lg">
      <thead>
        <tr class="text-sm font-bold text-gray-800">
          <th class="px-4 py-2 text-left">ID</th>
          <th class="px-4 py-2 text-left">NAME</th>
          <th class="px-4 py-2 text-left">FINE RATE PER DAY</th>
          <th class="px-4 py-2 text-left">ACTIONS</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let category of categories" class="text-base font-normal text-gray-800">
          <td class="px-4 py-2">{{ category.categoryId }}</td>
          <td class="px-4 py-2">{{ category.name }}</td>
          <td class="px-4 py-2">{{ category.fineRatePerDay }}</td>
          <td class="px-4 py-2 space-x-6 flex">
            <button class="cursor-pointer hover:text-yellow-500" (click)="openEditDialog(category)" title="Edit">
              <span class="material-symbols-outlined">edit_square</span>
            </button>
            <button class="cursor-pointer hover:text-red-500" (click)="openDeleteDialog(category)" title="Delete">
              <span class="material-symbols-outlined">delete</span>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- Add / Edit Dialog -->
 
<div *ngIf="showDialog" class="fixed inset-0 bg-black/75 flex items-center justify-center z-50">
  <div class="bg-white p-6 rounded-lg shadow-lg w-96">
    <h3 class="text-xl font-bold mb-4">{{ isEdit ? 'Edit Category' : 'Add Category' }}</h3>

    <!-- Category Name -->
    <input type="text" [(ngModel)]="dialogData.name" placeholder="Category Name" class="w-full border p-2 rounded mb-3" />
    <p *ngIf="!dialogData.name.trim()" class="text-red-500 text-sm mb-2">Name is required</p>

    <!-- Category Fine Rate Per Day -->
    <textarea [(ngModel)]="dialogData.fineRatePerDay" placeholder="Category Fine Rate Per Day" class="w-full border p-2 rounded mb-3"></textarea>

    <!-- Dialog Actions -->
    <div class="flex justify-end space-x-2">
      <button class="bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500" (click)="closeDialog()">Cancel</button>

      <button *ngIf="!isEdit" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 disabled:opacity-50"
        (click)="confirmAdd()" [disabled]="!dialogData.name.trim()">Add</button>

      <button *ngIf="isEdit" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 disabled:opacity-50"
        (click)="confirmUpdate()" [disabled]="!dialogData.name.trim()">Update</button>
    </div>
  </div>
</div>

<!-- Delete Confirmation Dialog -->

<div *ngIf="showDeleteDialog" class="fixed inset-0 bg-black/75 flex items-center justify-center z-50">
  <div class="bg-white p-6 rounded-lg shadow-lg w-96">
    <h3 class="text-lg font-bold mb-4">Confirm Delete</h3>
    <p>Are you sure you want to delete <b>{{ deleteTarget?.name }}</b>?</p>

    <div class="flex justify-end mt-4 space-x-2">
      <button class="bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500"
        (click)="closeDeleteDialog()">Cancel</button>
      <button class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600" (click)="confirmDelete()">Delete</button>
    </div>
  </div>
</div>


<!-- Toast Notification -->
<div *ngIf="showToast"
  class="fixed bottom-6 right-6 bg-gray-900 text-white px-4 py-3 rounded-lg shadow-lg animate-fade-in-out">
  {{ toastMessage }}
</div>