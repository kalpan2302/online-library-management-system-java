<!-- <div class="font-inter">
  <h2 class="text-4xl font-bold mb-2">Manage Books</h2>
  <div class="p-4 rounded-lg shadow-lg">

    <div class="flex justify-end mb-4">
      <button
        class="cursor-pointer px-16 py-3 text-sm font-bold text-gray-800 rounded-full shadow-sm bg-[#cef3ef] hover:bg-[#97e9e2] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#68d9d0] transition-colors duration-300"
        (click)="addBook()">
        ADD BOOK
      </button>
    </div>

    <p *ngIf="error" class="text-red-500">{{ error }}</p>

    <table class="min-w-full rounded-lg">
      <thead>
        <tr class="text-sm font-bold text-gray-800">
          <th class="px-4 py-2 text-left">ID</th>
          <th class="px-4 py-2 text-left">TITLE</th>
          <th class="px-4 py-2 text-left">AUTHOR</th>
          <th class="px-4 py-2 text-left">CATEGORY</th>
          <th class="px-4 py-2 text-left">TOTAL COPIES</th>
          <th class="px-4 py-2 text-left">AVAILABLE COPIES</th>
          <th class="px-4 py-2 text-left">ACTIONS</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let book of books" class="text-base font-normal text-gray-800">
          <td class="px-4 py-2">{{ book.bookId }}</td>
          <td class="px-4 py-2">{{ book.title }}</td>
          <td class="px-4 py-2">{{ book.authorsNames }}</td>
          <td class="px-4 py-2">{{ book.categoryName }}</td>
          <td class="px-4 py-2">{{ book.totalCopies }}</td>
          <td class="px-4 py-2">{{ book.availableCopies }}</td>
          <td class="px-4 py-2 space-x-6 flex">
            <button class="cursor-pointer hover:text-yellow-500" (click)="editBook(book)" title="Edit">
              <span class="material-symbols-outlined">edit_square</span>
            </button>
            <button class="cursor-pointer hover:text-red-500" (click)="deleteBook(book.bookId)" title="Delete">
              <span class="material-symbols-outlined">delete</span>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div> -->




<div class="font-inter">
  <h2 class="text-4xl font-bold mb-2">Manage Books</h2>
  <div class="p-4 rounded-lg shadow-lg">

    <!-- Add Book Button -->
    <div class="flex justify-end mb-4">
      <button
        class="cursor-pointer px-16 py-3 text-sm font-bold text-gray-800 rounded-full shadow-sm bg-[#cef3ef] hover:bg-[#97e9e2] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#68d9d0] transition-colors duration-300"
        (click)="openAddDialog()">
        ADD BOOK
      </button>
    </div>

    <!-- Error -->
    <p *ngIf="error" class="text-red-500">{{ error }}</p>

    <!-- Books Table -->
    <table class="min-w-full rounded-lg">
      <thead>
        <tr class="text-sm font-bold text-gray-800">
          <th class="px-4 py-2 text-left">ID</th>
          <th class="px-4 py-2 text-left">TITLE</th>
          <th class="px-4 py-2 text-left">AUTHOR</th>
          <th class="px-4 py-2 text-left">CATEGORY</th>
          <th class="px-4 py-2 text-left">PUBLICATION</th>
          <th class="px-4 py-2 text-left">ISBN</th>
          <th class="px-4 py-2 text-left">TOTAL COPIES</th>
          <th class="px-4 py-2 text-left">AVAILABLE</th>
          <th class="px-4 py-2 text-left">SHELF</th>
          <th class="px-4 py-2 text-left">ACTIONS</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let book of books" class="text-base font-normal text-gray-800">
          <td class="px-4 py-2">{{ book.bookId }}</td>
          <td class="px-4 py-2">{{ book.title }}</td>
          <td class="px-4 py-2">{{ book.authorsNames }}</td>
          <td class="px-4 py-2">{{ book.categoryName }}</td>
          <td class="px-4 py-2">{{ book.publicationName }}</td>
          <td class="px-4 py-2">{{ book.isbn }}</td>
          <td class="px-4 py-2">{{ book.totalCopies }}</td>
          <td class="px-4 py-2">{{ book.availableCopies }}</td>
          <td class="px-4 py-2">{{ book.shelfLocation }}</td>
          <td class="px-4 py-2 space-x-6 flex">
            <button class="cursor-pointer hover:text-yellow-500" (click)="openEditDialog(book)" title="Edit">
              <span class="material-symbols-outlined">edit_square</span>
            </button>
            <button class="cursor-pointer hover:text-red-500" (click)="openDeleteDialog(book)" title="Delete">
              <span class="material-symbols-outlined">delete</span>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- Add / Edit Dialog -->
<div *ngIf="showDialog" class="fixed inset-0 bg-black/75 flex items-center justify-center z-50">
  <div class="bg-white p-6 rounded-lg shadow-lg w-[450px] max-h-[90vh] overflow-y-auto">
    <h3 class="text-xl font-bold mb-4">{{ isEdit ? 'Edit Book' : 'Add Book' }}</h3>

    <!-- Title -->
    <input type="text" [(ngModel)]="dialogData.title" placeholder="Title" class="w-full border p-2 rounded mb-3" />
    <p *ngIf="!dialogData.title?.trim()" class="text-red-500 text-sm mb-2">Title is required</p>

    <!-- <select [(ngModel)]="dialogData.authorId" class="w-full border p-2 rounded mb-3">
      <option [ngValue]="null" disabled>Select Author</option>
      <option *ngFor="let a of authors" [ngValue]="a.authorId">{{ a.name }}</option>
    </select>


    <select [(ngModel)]="dialogData.categoryId" class="w-full border p-2 rounded mb-3">
      <option [ngValue]="null" disabled>Select Category</option>
      <option *ngFor="let c of categories" [ngValue]="c.categoryId">{{ c.name }}</option>
    </select>

    <select [(ngModel)]="dialogData.publicationId" class="w-full border p-2 rounded mb-3">
      <option [ngValue]="null" disabled>Select Publication</option>
      <option *ngFor="let p of publications" [ngValue]="p.publicationId">{{ p.name }}</option>
    </select> -->

    <!-- Author Dropdown -->
    <select [(ngModel)]="dialogData.authorName" class="w-full border p-2 rounded mb-3">
      <option value="" disabled selected>Select Author</option>
      <option *ngFor="let a of authors" [value]="a.name">{{ a.name }}</option>
    </select>

    <!-- Category Dropdown -->
    <select [(ngModel)]="dialogData.categoryName" class="w-full border p-2 rounded mb-3">
      <option value="" disabled selected>Select Category</option>
      <option *ngFor="let c of categories" [value]="c.name">{{ c.name }}</option>
    </select>

    <!-- Publication Dropdown -->
    <select [(ngModel)]="dialogData.publicationName" class="w-full border p-2 rounded mb-3">
      <option value="" disabled selected>Select Publication</option>
      <option *ngFor="let p of publications" [value]="p.name">{{ p.name }}</option>
    </select>


    <!-- ISBN -->
    <input type="text" [(ngModel)]="dialogData.isbn" placeholder="ISBN" class="w-full border p-2 rounded mb-3" />

    <!-- Copies -->
    <input type="number" [(ngModel)]="dialogData.totalCopies" placeholder="Total Copies"
      class="w-full border p-2 rounded mb-3" />
    <input type="number" [(ngModel)]="dialogData.availableCopies" placeholder="Available Copies"
      class="w-full border p-2 rounded mb-3" />

    <!-- Shelf -->
    <input type="text" [(ngModel)]="dialogData.shelfLocation" placeholder="Shelf Location"
      class="w-full border p-2 rounded mb-3" />

    <!-- Actions -->
    <div class="flex justify-end space-x-2">
      <button class="bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500" (click)="closeDialog()">Cancel</button>

      <button *ngIf="!isEdit" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 disabled:opacity-50"
        (click)="confirmAdd()" [disabled]="!dialogData.title?.trim()">Add</button>

      <button *ngIf="isEdit" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 disabled:opacity-50"
        (click)="confirmUpdate()" [disabled]="!dialogData.title?.trim()">Update</button>
    </div>
  </div>
</div>

<!-- Delete Confirmation Dialog -->
<div *ngIf="showDeleteDialog" class="fixed inset-0 bg-black/75 flex items-center justify-center z-50">
  <div class="bg-white p-6 rounded-lg shadow-lg w-96">
    <h3 class="text-lg font-bold mb-4">Confirm Delete</h3>
    <p>Are you sure you want to delete <b>{{ deleteTarget?.title }}</b>?</p>

    <div class="flex justify-end mt-4 space-x-2">
      <button class="bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500"
        (click)="closeDeleteDialog()">Cancel</button>
      <button class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600" (click)="confirmDelete()">Delete</button>
    </div>
  </div>
</div>

<!-- Toast -->
<div *ngIf="showToast"
  class="fixed bottom-6 right-6 bg-gray-900 text-white px-4 py-3 rounded-lg shadow-lg animate-fade-in-out">
  {{ toastMessage }}
</div>